import{_ as n,c as a,e,o as l}from"./app-BSSwj498.js";const i={};function t(p,s){return l(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="centos7基础配置" tabindex="-1"><a class="header-anchor" href="#centos7基础配置"><span>Centos7基础配置</span></a></h1><h3 id="使ip地址临时生效" tabindex="-1"><a class="header-anchor" href="#使ip地址临时生效"><span>使ip地址临时生效</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">ifconfig</span> eno16777736 <span class="token number">192.168</span>.0.31 netmask <span class="token number">255.255</span>.255.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="vm桥接模式下设置静态ip" tabindex="-1"><a class="header-anchor" href="#vm桥接模式下设置静态ip"><span>vm桥接模式下设置静态ip</span></a></h3><ul><li><p>设置了固定ip的vm，拷贝后无法正常使用，一定要注意。</p></li><li><p>桥接模式的网卡为VMnet0的Realtek，网段（192.168.1或0）取决于宿主机的路由器设置。</p></li><li><p>网卡名以ifconfig出来的为准。多余的ifcfg文件一定要删除，否则会导致网络服务重启失败！</p></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@master /<span class="token punctuation">]</span><span class="token comment"># cd /etc/sysconfig/network-scripts/</span></span>
<span class="line"><span class="token punctuation">[</span>root@master network-scripts<span class="token punctuation">]</span><span class="token comment"># vi ifcfg-ens33 </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-SHELL line-numbers-mode" data-highlighter="prismjs" data-ext="SHELL"><pre><code class="language-SHELL"><span class="line">TYPE=Ethernet</span>
<span class="line">BOOTPROTO=static</span>
<span class="line">#IPADDR=192.168.1.31 #odw</span>
<span class="line">IPADDR=192.168.1.32 #ods</span>
<span class="line">NETMASK=255.255.255.0</span>
<span class="line">BROADCAST=192.168.1.255</span>
<span class="line">GATEWAY=192.168.1.1</span>
<span class="line">DNS1=192.168.1.1</span>
<span class="line">ONBOOT=yes</span>
<span class="line">NAME=ens33</span>
<span class="line">DEVICE=ens33</span>
<span class="line">#UUID=eddac4a7-d408-401f-b0ac-f0503adaf586 #分布式时需要</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-SHELL line-numbers-mode" data-highlighter="prismjs" data-ext="SHELL"><pre><code class="language-SHELL"><span class="line">[root@master network-scripts]# service network restart</span>
<span class="line">Restarting network (via systemctl):                        [  OK  ]</span>
<span class="line">[root@master network-scripts]# ifconfig</span>
<span class="line">eno16777736: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span>
<span class="line">        inet 192.168.0.31  netmask 255.255.255.0  broadcast 192.168.0.255</span>
<span class="line">        inet6 fe80::20c:29ff:fe33:96a7  prefixlen 64  scopeid 0x20&lt;link&gt;</span>
<span class="line">        ether 00:0c:29:33:96:a7  txqueuelen 1000  (Ethernet)</span>
<span class="line">        RX packets 644387  bytes 88555183 (84.4 MiB)</span>
<span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span>
<span class="line">        TX packets 293848  bytes 98822379 (94.2 MiB)</span>
<span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果新ip还无法生效，则尝试关闭网络管理器NetwokManager</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">systemctl stop NetworkManager </span>
<span class="line">systemctl disable NetworkManager </span>
<span class="line"><span class="token function">service</span> network restart</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改hostname" tabindex="-1"><a class="header-anchor" href="#修改hostname"><span>修改hostname</span></a></h3><ul><li>搭建hadoop时，hostname不能带有下划线</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@centos1 /<span class="token punctuation">]</span><span class="token comment"># hostnamectl status</span></span>
<span class="line">   Static hostname: centos1</span>
<span class="line">         Icon name: computer-vm</span>
<span class="line">           Chassis: vm</span>
<span class="line">        Machine ID: e52947167017450cae2bc6178e8ebd8d</span>
<span class="line">           Boot ID: 4f59db8d68be4ac285772e8c6a5dc90d</span>
<span class="line">    Virtualization: vmware</span>
<span class="line">  Operating System: CentOS Linux <span class="token number">7</span> <span class="token punctuation">(</span>Core<span class="token punctuation">)</span></span>
<span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span>
<span class="line">            Kernel: Linux <span class="token number">3.10</span>.0-327.28.3.el7.x86_64</span>
<span class="line">      Architecture: x86-64</span>
<span class="line"><span class="token punctuation">[</span>root@centos1 /<span class="token punctuation">]</span><span class="token comment"># sudo hostnamectl set-hostname &quot;odw&quot;</span></span>
<span class="line"><span class="token punctuation">[</span>root@centos1 /<span class="token punctuation">]</span><span class="token comment"># hostname</span></span>
<span class="line">odw</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="systemctl" tabindex="-1"><a class="header-anchor" href="#systemctl"><span>systemctl</span></a></h3><ul><li><p>使用systemctl来启动/停止/重启服务 (start/stop/restart/status)</p></li><li><p>为了向后兼容，旧的service命令在CentOS 7中仍然可用，它会重定向所有命令到新的systemctl工具。</p></li></ul><h3 id="firewalld" tabindex="-1"><a class="header-anchor" href="#firewalld"><span>firewalld</span></a></h3><ul><li>Centos升级到7之后，不再使用iptables控制Linux的端口，而是使用firewalld代替了原来的iptables。</li><li>防火墙已默认冻结</li><li>常用命令有</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">systemctl status firewalld 	<span class="token comment">#查看防火墙状态，或者 firewall-cmd --state</span></span>
<span class="line">systemctl start firewalld 	<span class="token comment">#启动防火墙</span></span>
<span class="line">systemctl stop firewalld 	<span class="token comment">#关闭防火墙</span></span>
<span class="line">systemctl mask firewalld 	<span class="token comment">#冻结服务，冻结后将无法启动服务</span></span>
<span class="line">systemctl unmask firewalld 	<span class="token comment">#解冻服务</span></span>
<span class="line">systemctl <span class="token builtin class-name">enable</span> firewalld 	<span class="token comment">#配置开机自启动，创建link</span></span>
<span class="line">systemctl disable firewalld <span class="token comment">#删除开机自启动，删除之前创建的link</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装wget" tabindex="-1"><a class="header-anchor" href="#安装wget"><span>安装wget</span></a></h3><ul><li>download wget rpm file from internet.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@centos_bare ~<span class="token punctuation">]</span><span class="token comment"># rpm -ivh  ~/wget-1.14-15.el7.x86_64.rpm</span></span>
<span class="line">Preparing<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span></span>
<span class="line">Updating / installing<span class="token punctuation">..</span>.</span>
<span class="line">   <span class="token number">1</span>:wget-1.14-15.el7                 <span class="token comment">################################# [100%]</span></span>
<span class="line"><span class="token punctuation">[</span>root@centos_bare ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa |grep wget</span></span>
<span class="line">wget-1.14-15.el7.x86_64</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="yum" tabindex="-1"><a class="header-anchor" href="#yum"><span>yum</span></a></h3><ul><li>网易（163）yum源是国内 最好的yum源之一。第一步，下载repo文件</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/yum.repos.d/</span></span>
<span class="line"><span class="token function">wget</span> http://mirrors.163.com/.help/CentOS7-Base-163.repo</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第二步，备份并替换系统的repo文件</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment">#  mv CentOS-Base.repo CentOS-Base.repo.bak</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment">#  cp CentOS7-Base-163.repo CentOS-Base.repo</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第三步，执行yum源更新命令</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment">#  yum clean all</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment">#  yum makecache</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装telnet" tabindex="-1"><a class="header-anchor" href="#安装telnet"><span>安装telnet</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># yum install telnet</span></span>
<span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># yum install telnet-server</span></span>
<span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># yum install xinetd</span></span>
<span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep telnet</span></span>
<span class="line">telnet-server-0.17-59.el7.x86_64</span>
<span class="line">telnet-0.17-59.el7.x86_64</span>
<span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># </span></span>
<span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># vi telnet</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果/etc/xinetd.d/目录下没有telnet文件，那么就新建一个</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">service</span> telnet</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  flags      <span class="token operator">=</span> REUSE</span>
<span class="line">  socket_type   <span class="token operator">=</span> stream</span>
<span class="line">  <span class="token function">wait</span>      <span class="token operator">=</span> no</span>
<span class="line">  user      <span class="token operator">=</span> root</span>
<span class="line">  server     <span class="token operator">=</span> /usr/sbin/in.telnetd</span>
<span class="line">  log_on_failure <span class="token operator">+=</span> USERID</span>
<span class="line">  disable     <span class="token operator">=</span> no</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># systemctl restart xinetd.service</span></span>
<span class="line"><span class="token punctuation">[</span>root@master xinetd.d<span class="token punctuation">]</span><span class="token comment"># telnet localhost   #测试</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ftp" tabindex="-1"><a class="header-anchor" href="#ftp"><span>ftp</span></a></h3><ul><li><p>FTP服务器的默认目录是/var/ftp</p></li><li><p>首选查看系统中是否安装了vsftpd软件包</p></li></ul><div class="language-SHELL line-numbers-mode" data-highlighter="prismjs" data-ext="SHELL"><pre><code class="language-SHELL"><span class="line">rpm -qa |grep vsftpd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>如果没有，就安装，并设置开机启动</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> vsftpd</span>
<span class="line"><span class="token function">chkconfig</span> vsftpd on</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果是centos下，则使用该命令设置开机启动</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">systemctl <span class="token builtin class-name">enable</span> vsftpd.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>开启ftp</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">systemctl start vsftpd.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ntp时间同步" tabindex="-1"><a class="header-anchor" href="#ntp时间同步"><span>ntp时间同步</span></a></h3><ul><li>立即生效：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">ntpdate cn.ntp.org.cn</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>强烈建议配置时间同步服务（如ntp、oracle自带的时钟同步或vmware的时钟同步） 以保障几个实例间的时间一致，避免产生错误</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># yum install -y ntp</span></span>
<span class="line"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># crontab -l  #ls /var/spool/cron/</span></span>
<span class="line"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># </span></span>
<span class="line"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># crontab -e</span></span>
<span class="line">*/10 * * * * ntpdate cn.ntp.org.cn 	<span class="token comment">#10分钟，10秒钟：/10 * * *</span></span>
<span class="line"><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># crontab -l   		#cat /var/spool/cron/root  </span></span>
<span class="line">*/10 * * * * ntpdate cn.ntp.org.cn</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="免密登录" tabindex="-1"><a class="header-anchor" href="#免密登录"><span>免密登录</span></a></h3><ul><li>centos默认没有启动ssh无密登陆，需要去掉相关注释</li></ul><div class="language-SHELL line-numbers-mode" data-highlighter="prismjs" data-ext="SHELL"><pre><code class="language-SHELL"><span class="line">[hadoop@centos ~]$ vi /etc/ssh/sshd_config </span>
<span class="line">#RSAAuthentication yes</span>
<span class="line">#PubkeyAuthentication yes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>以配置自身免密登陆为例</li></ul><div class="language-SHEEL line-numbers-mode" data-highlighter="prismjs" data-ext="SHEEL"><pre><code class="language-SHEEL"><span class="line">[hadoop@centos ~]$ cd ~/.ssh</span>
<span class="line">[hadoop@centos .ssh]$ ssh-keygen -t rsa     #一路回车(或选择yes进行覆盖)</span>
<span class="line">[hadoop@centos .ssh]$ cat id_rsa.pub &gt;&gt; authorized_keys</span>
<span class="line">[hadoop@centos .ssh]$ chmod 600 authorized_keys</span>
<span class="line">[hadoop@centos .ssh]$ ll</span>
<span class="line">total 16</span>
<span class="line">-rw-------. 1 hadoop hadoop  402 Apr  8 17:41 authorized_keys # 签名密钥（可直接访问）</span>
<span class="line">-rw-------. 1 hadoop hadoop 1675 Apr  8 17:40 id_rsa  # 私钥</span>
<span class="line">-rw-r--r--. 1 hadoop hadoop  402 Apr  8 17:40 id_rsa.pub # 公钥</span>
<span class="line">-rw-r--r--. 1 hadoop hadoop  528 Apr  8 17:54 known_hosts 	# 记载登录过的主机信息，相当于日志</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>验证</li></ul><div class="language-SHELL line-numbers-mode" data-highlighter="prismjs" data-ext="SHELL"><pre><code class="language-SHELL"><span class="line">[hadoop@centos .ssh]$ ssh localhost #或ssh hostname</span>
<span class="line">Last login: Fri Apr  8 17:53:31 2022 from centos.hadoop #不再需要输入密码</span>
<span class="line">[hadoop@centos ~]$ exit</span>
<span class="line">logout</span>
<span class="line">Connection to localhost closed.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如何重启sshd服务</li></ul><div class="language-SHELL line-numbers-mode" data-highlighter="prismjs" data-ext="SHELL"><pre><code class="language-SHELL"><span class="line">[root@master .ssh]# systemctl restart sshd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,56)])])}const r=n(i,[["render",t]]),d=JSON.parse('{"path":"/centos/settings.html","title":"Centos7基础配置","lang":"en-US","frontmatter":{"outline":"deep"},"git":{},"filePathRelative":"centos/settings.md"}');export{r as comp,d as data};
